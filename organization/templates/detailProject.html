{% extends "base.html" %}
{% load staticfiles %}


{% block content %}
 <script src="{% static "siteWide/js/show.js" %}"></script> 

{% if project %}
<div class="bodyContent container">
<table class="table">
<thead>
  <tr>
    <th class="tableHead">{{ project.project_name }} 
    <span class="pull-right">
    <a href="/addIndividual">
		<button type="button" class="btn btn-success">Experiment Wizard</button>
	</a>
     <a href="/addSequencingRun">
		<button type="button" class="btn btn-success">Sequencing Run Wizard</button>
	</a>
	<a href="#">
		<button  type="button" class="btn btn-warning edit">Edit</button>
	</a>
	</span>
	</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><span class="rowHead">Project Owner:</span>{{ project.project_owner }}</td>
   </tr>
   <tr>
    <td><span class="rowHead">Project Members:</span><br/>
          	{% for values in project.project_contributor.all %}
  		({{ forloop.counter }}) {{values}}<br/>
		{% endfor %}
		</td>
  </tr>
  <tr>
    <td><span class="rowHead">Description:</span>{{ project.project_notes }}</td>
  </tr>
  <tr>
    <td><span class="rowHead">Active:</span>{{ project.project_active }}
    <a href="/deleteProject/{{ project.id }}">
		<button type="button" class="btn btn-danger pull-right hidden show">Delete Project</button>
	</a>
   	<a href="/editProject/{{ project.id }}">
		<button type="button" class="btn btn-warning pull-right hidden show">Edit Project</button>
	</a>
    </td>
  </tr>
 </tbody></table>
 
 {% if experiments %}
 <hr/>
<span class="tableHead">
	Experiment Details
</span>
<table class="table table-bordered table-hover table-responsive">
  	<tr>
		<td><span class="rowHead">Experiment Name</span></td>
  		<td><span class="rowHead">Biosource</span></td>
  		<td><span class="rowHead">Biosample</span></td>
  		<td><span class="rowHead">Protocol</span></td>
  		<td><span class="rowHead">Enzyme</span></td>
  		<td></td>
  	</tr>
    {% for exp in experiments %}
		<tr>
			<td><a href="/detailExperiment/{{exp.id}}">{{exp.experiment_name}}</a></td>
			<td>{{exp.experiment_biosample.biosample_biosource}}</td>
			<td>{{exp.experiment_biosample}}</td>
			<td>{{exp.experiment_protocol}}</td>
			<td>{{exp.experiment_enzyme}}</td>
			
			<td>
			<a href="/editExperiment/{{ exp.id }}">
				<button type="button" class="btn btn-danger pull-right hidden show">Delete Experiment</button>
			</a>
			<a href="/editExperiment/{{exp.id}}">
				<button type="button" class="btn btn-warning pull-right hidden show">Edit Experiment</button>
			</a>
			</td>
  </tr>
    {% endfor %}
 </table>
 <a href="/exportSample">
		<button type="button" class="btn btn-success">Export sample meta data</button>
	</a>
	<a href="/exportAnalysis">
		<button type="button" class="btn btn-success">Export Analysis</button>
	</a>
	<a href="/exportGEO">
		<button type="button" class="btn btn-success">Export- GEO</button>
	</a>
{% endif %}
 
 {% if sequencingRuns %}
  <hr/>
 <span class="tableHead">
	Sequencing Unit Details
</span>
<table class="table table-bordered table-hover table-responsive">
  	<tr>
  		<td><span class="rowHead">Sequencing Run Name</span></td>
  		<td><span class="rowHead">Experiments</span></td>
  		<td><span class="rowHead">Submission Date</span></td>
  		<td><span class="rowHead">Retrieval Date</span></td>
  		<td><span class="rowHead">Barcode</span></td>
  		<td><span class="rowHead">Submitted</span></td>
  		
  		<td></td>
  	</tr>
    {% for run in sequencingRuns %}
	<tr>
	<td><a href="/detailSequencingRun/{{run.id}}">{{ run.run_name }}</a></td>
	<td>
		{% for values in run.run_Experiment.all %}
	    			({{ forloop.counter }}) {{values}}<br/>
	  	{% endfor %}
	</td>
	<td>{{ run.run_submission_date }}</td>
	<td>{{ run.run_retrieval_date }}</td>
	<td>{{ run.run_Add_Barcode }}</td>
	<td>
		{% if run.run_submitted == False %}
        <a href="/submitSequencingRun/{{ run.id}}">
			<button type="button" class="btn btn-info"> Submit Unit</button>
		</a>
		{% elif run.run_submitted == True and run.run_approved == True %}
			<button type="button" class="btn btn-warning disabled">Approved</button> 
		{% else %}
			<button type="button" class="btn btn-primary disabled">Submitted</button>
		{% endif %}
	</td>
	<td>
	<a href="/deleteSequencingRun/{{ run.id }}">
		<button type="button" class="btn btn-danger pull-right hidden show">Delete Run</button>
		</a>
	<a href="/editSequencingRun/{{run.id}}">
		<button type="button" class="btn btn-warning pull-right hidden show">Edit Run</button>
	</a>
	</td>
    <!-- <td>
    	<span class="rowHead">Sequencing Unit:</span> {{ unit.name }}&nbsp;&nbsp;
    	<span class="rowHead">Cost:</span>{{ unit.cost }}&nbsp;&nbsp;
    	<span class="rowHead">Read Length:</span>{{ unit.read_length }}&nbsp;&nbsp;
    	<span class="rowHead">Submission Date:</span>{{ unit.submission_date }}&nbsp;&nbsp;
    	<span class="rowHead">Retrieval Date:</span>{{ unit.retrieval_date }}&nbsp;&nbsp;
    	<span class="rowHead">Sequencing Platform:</span>{{ unit.sequencing_platform }}&nbsp;&nbsp;
    	<span class="rowHead">Sequencing Center:</span>{{ unit.sequencing_center }}&nbsp;&nbsp;
    	<span class="rowHead">Type:</span>{{ unit.type }}&nbsp;&nbsp;
    	<a href="#" data-toggle="tooltip" data-placement="bottom" title="{{ unit.notes }}">Notes</a>&nbsp;&nbsp;
    	<span class="rowHead">Approved:</span>{{ unit.approved }}&nbsp;&nbsp;
    	{% if unit.submitted == False %}
        <a href="/submitLane/{{ unit.id}}">
			<button type="button" class="btn btn-info"> Submit Unit</button>
		</a>
		{% else %}
			<button type="button" class="btn btn-primary disabled">Submitted</button>
		{% endif %}
		<a href="/deleteLane/{{ unit.id }}">
		<button type="button" class="btn btn-danger pull-right hidden show">Delete Unit</button>
		</a>
	<a href="/editLane/{{unit.id}}">
		<button type="button" class="btn btn-warning pull-right hidden show">Edit Unit</button>
	</a>
    </td> -->
  </tr>
    {% endfor %}
     </table>
{% endif %}

{% if files %}
 <hr/>
    <span class="tableHead">
    	Files Details
    </span>
<table class="table table-bordered table-hover table-responsive">
	 <tr>
		<td><span class="rowHead">File Name</span></td>
  		<td><span class="rowHead">Sample Name</span></td>
  		<td><span class="rowHead">Sequencing Unit</span></td>
  		<td><span class="rowHead">Number Of Reads</span></td>
  		<td></td>
  	</tr>
    {% for file in files %}
	<tr>
			<td><a href="/showFiles/{{ file.id }}">{{ file.name }}</a></td>
			<td>{{ file.sample.name }}</td>
			<td>{{ file.lane.name }}</td>
			<td>{{ file.number_of_reads }}</td>
			<td>
			 <a href="/deleteFile/{{ file.id }}">
				<button type="button" class="btn btn-danger pull-right hidden show">Delete File</button>
			</a>
		    <a href="/editFile/{{file.id}}">
				<button type="button" class="btn btn-warning pull-right hidden show">Edit File</button>
			</a>
			</td>
    <!-- <td>
    	<span class="rowHead">Sample Name:</span> {{ file.sample.name }}<br/>
    	<span class="rowHead">Sequencing Unit:</span> {{ file.lane.name }}<br/>
    	<span class="rowHead">File Name:</span> {{ file.name }}<br/>
    	<span class="rowHead">Main File Path:</span>{{ file.main_file_path }}<br/>
    	<span class="rowHead">Backup Path:</span>{{ file.backup_path }}<br/>
    	<span class="rowHead">s3 Path:</span>{{ file.s3_path }}<br/>
    	<span class="rowHead">sha256sum:</span>{{ file.sha256sum }}<br/>
    	<span class="rowHead">md5sum:</span>{{ file.md5sum }}<br/>
    	<span class="rowHead">Number Of Reads :</span>{{ file.number_of_reads }}<br/>
    	<span class="rowHead">Notes :</span>{{ file.notes }}<br/>
    <a href="/deleteFile/{{ file.id }}">
		<button type="button" class="btn btn-danger pull-right hidden show">Delete File</button>
	</a>
    <a href="/editFile/{{file.id}}">
		<button type="button" class="btn btn-warning pull-right hidden show">Edit File</button>
	</a>
    </td> -->
  </tr>
    {% endfor %}
{% endif %}
</table>
{% else %}
    <p>No data available.</p>
{% endif %}
<br/><br/>
</div>
{% endblock %} 

